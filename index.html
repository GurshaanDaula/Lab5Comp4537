<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Lab 5 Client â€“ Patient DB</title>
    <script>
        async function sendQuery() {
            const q = document.getElementById("query").value.trim();
            if (!q) return alert("Enter a query.");

            if (q.toLowerCase().startsWith("insert")) {
                const res = await fetch("http://localhost:4000/api/v1/sql", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ query: q })   // ðŸ‘ˆ must be valid JSON!
                });
                document.getElementById("output").textContent =
                    JSON.stringify(await res.json(), null, 2);
            } else if (q.toLowerCase().startsWith("select")) {
                const res = await fetch(`http://localhost:4000/api/v1/sql/${encodeURIComponent(q)}`);
                document.getElementById("output").textContent =
                    JSON.stringify(await res.json(), null, 2);
            }
        }
    </script>

</head>

<body>
    <h2>Patient DB Client</h2>
    <button onclick="insertSample()">Insert Sample Rows</button><br><br>
    <textarea id="query" rows="5" cols="70" placeholder="Enter SQL (SELECT or INSERT only)"></textarea><br>
    <button onclick="sendQuery()">Submit Query</button>
    <pre id="output"></pre>
</body>

</html>